<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - app.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>app.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">72.51</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">254</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">20.71</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.72</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">// anna&#039;s
require(&#039;nodetime&#039;).profile({
    accountKey: &#039;13bf15a356e62b822df4395f183fe0a83af757f4&#039;, 
    appName: &#039;Node.js VAMPS Application&#039;
  });

var compression = require(&#039;compression&#039;);
var express = require(&#039;express&#039;);
//var expose = require(&#039;express-expose&#039;);
var router = express.Router();
var session = require(&#039;express-session&#039;);
var path = require(&#039;path&#039;);
global.app_root = path.resolve(__dirname);

var favicon = require(&#039;static-favicon&#039;);
var logger = require(&#039;morgan&#039;);
var cookieParser = require(&#039;cookie-parser&#039;);
var bodyParser = require(&#039;body-parser&#039;);
var flash = require(&#039;express-flash&#039;);
var passport = require(&#039;passport&#039;);

var fs = require(&#039;fs&#039;);
var zlib = require(&#039;zlib&#039;);
//var db = require(&#039;mysql2&#039;);
// without var declaration connection is global
// needed for DATASETS initialization
connection = require(&#039;./config/database-dev&#039;);
//connection.connect();
var routes = require(&#039;./routes/index&#039;);  // This grabs ALL_DATASETS
var users = require(&#039;./routes/routes_users&#039;);
var search = require(&#039;./routes/routes_search&#039;);
var projects = require(&#039;./routes/routes_projects&#039;);
var datasets = require(&#039;./routes/routes_datasets&#039;);
//var ALL_DATASETS = require(&#039;./routes/load_all_datasets2&#039;)(connection);
var visuals = require(&#039;./routes/visuals/routes_visualization&#039;);
var C = require(&#039;./public/constants&#039;);

var app = express();
app.set(&#039;appName&#039;, &#039;VAMPS&#039;);
require(&#039;./config/passport&#039;)(passport, connection.db); // pass passport for configuration

// view engine setup
app.set(&#039;views&#039;, path.join(__dirname, &#039;views&#039;));
app.engine(&#039;html&#039;, require(&#039;ejs&#039;).renderFile);
app.set(&#039;view engine&#039;, &#039;html&#039;);

app.set(express.static(__dirname + &#039;/tmp&#039;));
// MIDDLEWARE  &lt;-- must be in correct order:
app.use(favicon());
app.use(logger(&#039;dev&#039;));
app.use(bodyParser({limit: 1024000000 })); // 1024MB
app.use(bodyParser.json());
app.use(bodyParser.urlencoded());
app.use(cookieParser());

app.use(compression());
/**
 * maxAge used to cache the content, # msec
 * to &quot;uncache&quot; some pages: http://stackoverflow.com/questions/17407770/express-setting-different-maxage-for-certain-files
 */
app.use(express.static(__dirname + &#039;/public&#039;, {maxAge: &#039;24h&#039; }));
// app.use(express.static(__dirname + &#039;/public&#039;, {maxAge: 900000 }));
// app.use(express.static(path.join(__dirname, &#039;/public&#039;)));
app.use(&#039;public/javascripts&#039;, express.static(path.join(__dirname, &#039;/public/javascripts&#039;)));
app.use(&#039;public/stylesheets&#039;, express.static(path.join(__dirname, &#039;/public/stylesheets&#039;)));

// app.use(&#039;views/add_ins&#039;, express.static(path.join(__dirname, &#039;/views/add_ins&#039;)));
// required for passport
// app.use(session({ secret: &#039;keyboard cat&#039;,  cookie: {maxAge: 900000}})); // session secret
app.use(session({ secret: &#039;keyboard cat&#039;})); // session secret

app.use(passport.initialize());
app.use(passport.session()); // persistent login sessions
app.use(flash()); // use connect-flash for flash messages stored in session

// Make our db accessible to our router
// app.use(function(req, res, next){
//     if(!connection.db) {return next(new Error(&#039;no db connection&#039;));}
//     req.db = connection.db;
//     req.C = C;
//     return next();
// });
app.use(function(req, res, next){
	if (connection.db == null) {
	   this.send(&#039;We cannot reach the database right now, please try again later.&#039;);
	   return;
	 }else{
	    req.db = connection.db;
	    req.C = C;
	    return next();
	}
});
//var hdf5 = require(&#039;hdf5&#039;).hdf5;
// example of roll-your-own middleware:
// GET: localhost:3000/?id=324
// app.use(function (req, res,next) {
//     console.log(&#039;START &#039;);
//     if (req.query.id){
//         console.log(&#039;got id &#039;+req.query.id);
//         next();
//     }else if (req.query.name){
//         console.log(&#039;got name &#039;+req.query.name);
//         next();
//     }else{
//         next();
//     }
// });

// ROUTES:
app.use(&#039;/&#039;, routes);
app.use(&#039;/users&#039;, users);
app.use(&#039;/projects&#039;, projects);
app.use(&#039;/datasets&#039;, datasets);
app.use(&#039;/visuals&#039;, visuals);
app.use(&#039;/search&#039;, search);


// for non-routing pages such as heatmap, counts and bar_charts
app.get(&#039;/*&#039;, function(req, res, next){
    console.warn(req.params);
    console.warn(req.uri);
    var url = req.params[0];
    // I want to create a page like: counts_table_2014080_13452.html
    // for each link
    if (url === &#039;visuals/user_data/ctable.html&#039;) { // 
        // Yay this is the File A... 
        console.warn(&quot;The user file  has been requested&quot;);
        router.get(&#039;/visuals/user_data/ctable.html&#039;,  function(req, res) {
            console.warn(&#039;trying to open ctable.html&#039;);
        });
    } else {
        // we don&#039;t care about any other file, let it download too        
        console.warn(&quot;No Route Found&quot;);
        next();
    }
});

/// catch 404 and forward to error handler
app.use(function(req, res, next) {
    var err = new Error(&#039;Not Found&#039;);
    err.status = 404;
    next(err);
});

/// error handlers &lt;-- these middleware go after routes

// development error handler
// will print stacktrace
if (app.get(&#039;env&#039;) === &#039;development&#039;) {
    console.log(&#039;ENV: Development&#039;);
    app.use(function(err, req, res, next) {
        res.status(err.status || 500);
        res.render(&#039;error.ejs&#039;, {
            message: err.message,
            error: err
        });
    });
}
if (app.get(&#039;env&#039;) === &#039;production&#039;) {
    console.log(&#039;ENV: Production&#039;);
}
// production error handler
// no stacktraces leaked to user
app.use(function(err, req, res, next) {
    res.status(err.status || 500);
    res.render(&#039;error.ejs&#039;, {
        message: err.message,
        error: {}
    });
});


/**
* Create global objects once upon server startup
*/

var silvaTaxonomy = require(&#039;./models/silva_taxonomy&#039;);
var all_silva_taxonomy = new silvaTaxonomy();
var CustomTaxa  = require(&#039;./routes/helpers/custom_taxa_class&#039;);
var TreeModel = require(&#039;tree-model&#039;);;

// GLOBAL if leave off &#039;var&#039;:
// FORMAT: TaxaCounts[ds_id][rank_name][tax_id] = count
// script: /public/scripts/create_taxcounts_lookup.py
console.log(&#039;Loading DATABASE: &#039;+NODE_DATABASE+&#039; (see file config/database-xxx.js)&#039;)

// these files are manually created before server startup using the scripts in public/scripts
// var rstream = fs.createReadStream(&#039;./public/json/tax_counts--&#039;+NODE_DATABASE+&#039;.json.gz&#039;);
// var unzip = zlib.createGunzip();
// var taxcounts =&#039;&#039;
// var chunk;
// rstream.pipe(unzip)
// 	.on(&#039;data&#039;, function (chunk) {
// 		taxcounts += chunk;
//   	})
// 	.on(&#039;end&#039;, function() {
// 		    console.log(&#039;Finished reading TAXCOUNTS&#039;);
// 	});

//TAXCOUNTS     = require(&#039;./public/json/tax_counts--&#039;+NODE_DATABASE+&#039;.json.gz&#039;);
MetadataValues = require(&#039;./public/json/metadata--&#039; + NODE_DATABASE+&#039;.json&#039;);


all_silva_taxonomy.get_all_taxa(function(err, results) {
  if (err)
    throw err; // or return an error message, or something
  else
  {
    //console.log(&quot;AAA all_silva_taxonomy from app = &quot; + JSON.stringify(results));
    
	//TAXCOUNTS = JSON.parse(taxcounts);
	//console.log(&#039;TAXCOUNTS2 &#039;+JSON.stringify(TAXCOUNTS));
	// var small_rows = [ {&quot;domain&quot;:&quot;Archaea&quot;,&quot;phylum&quot;:&quot;&quot;,&quot;klass&quot;:&quot;&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:1,&quot;phylum_id&quot;:1,&quot;klass_id&quot;:1,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Archaea&quot;,&quot;phylum&quot;:&quot;Crenarchaeota&quot;,&quot;klass&quot;:&quot;&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:1,&quot;phylum_id&quot;:13,&quot;klass_id&quot;:1,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Archaea&quot;,&quot;phylum&quot;:&quot;Crenarchaeota&quot;,&quot;klass&quot;:&quot;D-F10&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:1,&quot;phylum_id&quot;:13,&quot;klass_id&quot;:33,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Archaea&quot;,&quot;phylum&quot;:&quot;Crenarchaeota&quot;,&quot;klass&quot;:&quot;Group_C3&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:1,&quot;phylum_id&quot;:13,&quot;klass_id&quot;:52,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Archaea&quot;,&quot;phylum&quot;:&quot;Crenarchaeota&quot;,&quot;klass&quot;:&quot;Marine_Benthic_Group_A&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:1,&quot;phylum_id&quot;:13,&quot;klass_id&quot;:58,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;&quot;,&quot;klass&quot;:&quot;&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:1,&quot;klass_id&quot;:1,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;&quot;,&quot;klass&quot;:&quot;&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:1,&quot;klass_id&quot;:1,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Acidobacteria&quot;,&quot;klass&quot;:&quot;&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:2,&quot;klass_id&quot;:1,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Acidobacteria&quot;,&quot;klass&quot;:&quot;Acidobacteria&quot;,&quot;order&quot;:&quot;Acidobacteriales&quot;,&quot;family&quot;:&quot;Acidobacteriaceae&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:2,&quot;klass_id&quot;:2,&quot;order_id&quot;:7,&quot;family_id&quot;:8,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Acidobacteria&quot;,&quot;klass&quot;:&quot;Holophagae&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:2,&quot;klass_id&quot;:55,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Acidobacteria&quot;,&quot;klass&quot;:&quot;Holophagae&quot;,&quot;order&quot;:&quot;Holophagales&quot;,&quot;family&quot;:&quot;Holophagaceae&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:2,&quot;klass_id&quot;:55,&quot;order_id&quot;:73,&quot;family_id&quot;:138,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Actinobacteria&quot;,&quot;klass&quot;:&quot;Actinobacteria&quot;,&quot;order&quot;:&quot;&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:3,&quot;klass_id&quot;:5,&quot;order_id&quot;:1,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Actinobacteria&quot;,&quot;klass&quot;:&quot;Actinobacteria&quot;,&quot;order&quot;:&quot;Acidimicrobiales&quot;,&quot;family&quot;:&quot;&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:3,&quot;klass_id&quot;:5,&quot;order_id&quot;:5,&quot;family_id&quot;:1,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1},{&quot;domain&quot;:&quot;Bacteria&quot;,&quot;phylum&quot;:&quot;Actinobacteria&quot;,&quot;klass&quot;:&quot;Actinobacteria&quot;,&quot;order&quot;:&quot;Acidimicrobiales&quot;,&quot;family&quot;:&quot;Acidimicrobiaceae&quot;,&quot;genus&quot;:&quot;&quot;,&quot;species&quot;:&quot;&quot;,&quot;strain&quot;:&quot;&quot;,&quot;domain_id&quot;:2,&quot;phylum_id&quot;:3,&quot;klass_id&quot;:5,&quot;order_id&quot;:5,&quot;family_id&quot;:6,&quot;genus_id&quot;:1,&quot;species_id&quot;:1,&quot;strain_id&quot;:1}];
    // var new_taxonomy = new CustomTaxa(small_rows);
    // uncomment when we want all data:
    new_taxonomy = new CustomTaxa(results);
    // uncomment to print out the object:
    // console.log(&#039;000 new_taxonomy = &#039; + JSON.stringify(new_taxonomy));
    new_taxonomy.make_html_tree_file(new_taxonomy.taxa_tree_dict_map_by_id, new_taxonomy.taxa_tree_dict_map_by_rank[&quot;domain&quot;]);    
    //console.log(&quot;\nnew_taxonomy.taxa_tree_dict = &quot; + JSON.stringify(new_taxonomy.taxa_tree_dict));
  // for(n in new_taxonomy.taxa_tree_dict){
		//console.log(JSON.stringify(new_taxonomy.taxa_tree_dict[n]))
  // }
    //console.log(&quot;\ntaxa_tree_dict_map_by_id = &quot; + JSON.stringify(new_taxonomy.taxa_tree_dict_map_by_id));
    


    // console.log(&#039;taxa_tree_dict_map_by_db_id_n_rank = &#039; + JSON.stringify(new_taxonomy.taxa_tree_dict_map_by_db_id_n_rank));
    // console.log(&#039;taxa_tree_dict_map_by_rank[&quot;phylum&quot;] = &#039; + JSON.stringify(new_taxonomy.taxa_tree_dict_map_by_rank[&#039;phylum&#039;]));

    // console.log(&#039;taxa_tree_dict_map_by_name_n_rank = &#039; + JSON.stringify(new_taxonomy.taxa_tree_dict_map_by_name_n_rank));

    
    //console.log(&#039;RRR333 taxa_tree_dict_map_by_db_id_n_rank[&quot;435_klass&quot;][&quot;taxon&quot;] = &#039;+JSON.stringify(new_taxonomy.taxa_tree_dict_map_by_db_id_n_rank[&quot;435_klass&quot;]));
    
  }
});


//var taxCounts = require(&#039;./routes/helpers/create_taxcounts_class&#039;);
//new taxCounts();


module.exports = app;

// if (!module.parent) {
//   http.createServer(app).listen(process.env.PORT, function(){
//     console.log(&quot;Server listening on port &quot; + app.get(&#039;port&#039;));
//   });
// }

if (!module.parent) {
  var server = http.createServer(app);
  cluster(server).listen(process.env.PORT);
}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
