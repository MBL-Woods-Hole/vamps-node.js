<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - public/javascripts/admin.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>public/javascripts/admin.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">66.10</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">209</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">33.10</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.35</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">$(document).ready(function(){

   
    select_user = document.getElementById(&#039;select_user&#039;) || null;
    if (select_user !== null) {
      select_user.addEventListener(&#039;change&#039;, function () {
          get_select_user_info();
      });
    }

    select_project = document.getElementById(&#039;select_project&#039;) || null;
    if (select_project !== null) {
      select_project.addEventListener(&#039;change&#039;, function () {
          show_access_button();
      });
    }

    select_project_alter = document.getElementById(&#039;select_project_alter&#039;) || null;
    if (select_project_alter !== null) {
      select_project_alter.addEventListener(&#039;change&#039;, function () {
          show_current_project_info();
      });
    }

    grant_access_btn = document.getElementById(&#039;grant_access_btn&#039;) || null;
    if (grant_access_btn !== null) {
      grant_access_btn.addEventListener(&#039;click&#039;, function () {
          grant_access();
      });
    }
    

});
//
//
//
function update_project(item_to_update, pid)
{
    
    switch(item_to_update){
      case &#039;pname&#039;:
          response_div = document.getElementById(&#039;new_pname_response_id&#039;);
          new_value = document.getElementById(&#039;new_pname&#039;).value;
          break;
      case &#039;powner&#039;:
          response_div = document.getElementById(&#039;new_powner_response_id&#039;);
          new_value = document.getElementById(&#039;new_oid&#039;).value;
          break;
      case &#039;ptitle&#039;:
          response_div = document.getElementById(&#039;new_ptitle_response_id&#039;);
          new_value = document.getElementById(&#039;new_ptitle&#039;).value;
          break;
      case &#039;pdesc&#039;:
          response_div = document.getElementById(&#039;new_pdesc_response_id&#039;);
          new_value = document.getElementById(&#039;new_pdesc&#039;).value;
          break;
      default:
          response_div = document.getElementById(&#039;new_pname_response_id&#039;);
          new_value = document.getElementById(&#039;new_pname&#039;).value;

      
    }
    var xmlhttp = new XMLHttpRequest();  
    xmlhttp.open(&quot;POST&quot;, &#039;/admin/update_project_info&#039;, true);
    xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);
    xmlhttp.setRequestHeader(&quot;data-type&quot;,&quot;html&quot;);
    var args = &#039;item=&#039;+item_to_update+&#039;&amp;value=&#039;+new_value+&#039;&amp;pid=&#039;+pid;
    xmlhttp.onreadystatechange = function() {        
      if (xmlhttp.readyState == 4 ) {
          
          var response = xmlhttp.responseText;            
          response_div.innerHTML = response;      
         
      }
    };
    xmlhttp.send(args);
}
//
// SELECT USER
//
function get_select_user_info()
{
  
    selected_uid = document.getElementById(&#039;select_user&#039;).value;
    user_info_div = document.getElementById(&#039;user_info_div&#039;);
    document.getElementById(&#039;select_projects_div&#039;).style.visibility = &#039;visible&#039;;
    



    var xmlhttp = new XMLHttpRequest();  
    xmlhttp.open(&quot;POST&quot;, &#039;/admin/show_user_info&#039;, true);
    xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);
    xmlhttp.setRequestHeader(&quot;data-type&quot;,&quot;html&quot;);
    var args = &#039;uid=&#039;+selected_uid;
    xmlhttp.onreadystatechange = function() {        
      if (xmlhttp.readyState == 4 ) {
          
          var response = xmlhttp.responseText;            
          user_info_div.innerHTML = response;      
         
      }
    };
    xmlhttp.send(args);
  
}

//
//
//
function show_access_button()
{
    //alert(&#039;in show_access_button&#039;);
    selected_uid = document.getElementById(&#039;select_user&#039;).value;
    info_div = document.getElementById(&#039;info_div&#039;);
    selected_pid = document.getElementById(&#039;select_project&#039;).value;
    document.getElementById(&#039;assign_access_div&#039;).style.visibility = &#039;visible&#039;;

}
function grant_access(type, id)
{
    info_div = document.getElementById(&#039;response_info&#039;);
    
    form = document.getElementById(type+&#039;_&#039;+id);

    
    var selected_pid, selected_uid;
     //alert(type+&quot; &quot;+id)   
    if(type===&#039;by_user&#039;){ 
      selected_pid = form.by_user_select.value
      selected_uid = id
    }else if(type===&#039;by_project&#039;){
      selected_uid = form.by_project_select.value
      selected_pid = id
   }else{
      info_div.innerHTML = &#039;Error-1&#039;; 
      return;
   }
   //alert(selected_pid+&quot; &quot;+selected_uid)  
   if(selected_uid === &#039;0&#039; || selected_pid === &#039;0&#039;){
      info_div.innerHTML = &#039;Choose a name&#039;; 
      return;
   }
   //return
    
    var xmlhttp = new XMLHttpRequest();  
    xmlhttp.open(&quot;POST&quot;, &#039;/admin/grant_access&#039;, true);
    xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);
    xmlhttp.setRequestHeader(&quot;data-type&quot;,&quot;html&quot;);
    var args = &#039;uid=&#039;+selected_uid+&#039;&amp;pid=&#039;+selected_pid;
    xmlhttp.onreadystatechange = function() {        
      if (xmlhttp.readyState == 4 ) {
          
          var response = xmlhttp.responseText;            
          info_div.innerHTML = response;      
         
      }
    };
    xmlhttp.send(args);

}
// function grant_access2()
// {
//     selected_uid = document.getElementById(&#039;select_user&#039;).value;
//     selected_pid = document.getElementById(&#039;select_project&#039;).value;
//     document.getElementById(&#039;select_project&#039;).value = &#039;.....&#039;;
//     document.getElementById(&#039;assign_access_div&#039;).style.visibility = &#039;hidden&#039;;
    
//     var xmlhttp = new XMLHttpRequest();  
//     xmlhttp.open(&quot;POST&quot;, &#039;/admin/grant_access&#039;, true);
//     xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);
//     xmlhttp.setRequestHeader(&quot;data-type&quot;,&quot;html&quot;);
//     var args = &#039;uid=&#039;+selected_uid+&#039;&amp;pid=&#039;+selected_pid;
//     xmlhttp.onreadystatechange = function() {        
//       if (xmlhttp.readyState == 4 ) {
          
//           var response = xmlhttp.responseText;            
//           info_div.innerHTML = response;      
         
//       }
//     };
//     xmlhttp.send(args);

// }
//
//
//
function show_current_project_info()
{
    //alert(&#039;in show_access_button&#039;);
    
    info_div = document.getElementById(&#039;current_info&#039;);
    selected_pid = document.getElementById(&#039;select_project_alter&#039;).value;
    var xmlhttp = new XMLHttpRequest();  
    xmlhttp.open(&quot;POST&quot;, &#039;/admin/show_project_info&#039;, true);
    xmlhttp.setRequestHeader(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);
    xmlhttp.setRequestHeader(&quot;data-type&quot;,&quot;html&quot;);
    var args = &#039;pid=&#039;+selected_pid;
    xmlhttp.onreadystatechange = function() {        
      if (xmlhttp.readyState == 4 ) {
          
          var response = xmlhttp.responseText;            
          info_div.innerHTML = response;      
         
      }
    };
    xmlhttp.send(args);

}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
