<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - public/javascripts/geodistribution.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>public/javascripts/geodistribution.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">55.37</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">145</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">34.32</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.29</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">var loadMap = function() 
{
        
		var myOptions = {
          center: new google.maps.LatLng(41.5, -70.66), // Woods Hole, MA
          zoom: 3,
          mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById(&quot;map-canvas&quot;),
            myOptions);
			//var site = &#039;http://maps.google.com/mapfiles/ms/icons/&#039; // 5 basic colors
			//var marker_colors = [&#039;red&#039;,&#039;purple&#039;,&#039;green&#039;,&#039;yellow&#039;,&#039;blue&#039;];
			
		var pngsite = &#039;http://labs.google.com/ridefinder/images/mm_20_&#039; //  10 colors + lots others
		var marker_colors = [&#039;red&#039;,&#039;purple&#039;,&#039;green&#039;,&#039;yellow&#039;,&#039;blue&#039;,&#039;gray&#039;,&#039;orange&#039;,&#039;white&#039;,&#039;black&#039;,&#039;brown&#039;];
			
		for(p in data){
				//if( p % 5 == 5 ){
				color = marker_colors[Math.floor(p % marker_colors.length)];
				//alert(Math.floor(p % marker_colors.length).toString()+&#039; - &#039;+color)
				//	}
				var myLatlng = new google.maps.LatLng(data[p].latitude,data[p].longitude);	
				var marker = new google.maps.Marker({
			      position : myLatlng,
			      map : map,
				  	icon : pngsite+color+&quot;.png&quot;,
				  	shadow : pngsite+&quot;shadow.png&quot;,
			      title : data[p].proj_dset
			  });
		}
};

function create_geospatial() {
      //alert(zoom_level)
     //  geospatial_created = true;
     //  var geo_div = document.getElementById(&#039;map-canvas&#039;);
      var mapCanvas = document.getElementById(&#039;map-canvas&#039;);
	    mapCanvas.innerHTML = &#039;&#039;;
      mapCanvas.style.display = &#039;block&#039;;
	    mapCanvas.style.height = &#039;900px&#039;;
      
      var loc_data = [];
      var lat_lon_collector = {};
      var pid_collector = {};
      var latlon;
      
      for (var did in md_local) {
      //for(p in data){
      		//ds = md_local[ds]
          //alert(did)
          ds =  md_local[did].proj_dset;
          pid_collector[ds] = md_local[did].pid
          var lat = &#039;&#039;;
          var lon = &#039;&#039;;
          lat = Number(md_local[did].latitude);
          lon = Number(md_local[did].longitude);
                    
          if(typeof lat == &#039;number&#039; &amp;&amp; typeof lon == &#039;number&#039;){
            //alert(ds)
            latlon = lat.toString() +&#039;;&#039;+ lon.toString();
            if (latlon in lat_lon_collector) {
              newds = lat_lon_collector[latlon] + &quot;:::&quot; + ds;
              lat_lon_collector[latlon] = newds;
            }else{
              lat_lon_collector[latlon] = ds;
            }            
          }
      }
      var z = 1;

      for(latlon in lat_lon_collector){
        //alert(lat_lon_collector[latlon])
        ds = lat_lon_collector[latlon];
        var latlons =  latlon.split(&#039;;&#039;);
        loc_data.push([ds, latlons[0], latlons[1], z]);
        z+=1; 

      }

      if (loc_data.length === 0){
          mapCanvas.innerHTML=&#039;No Lat-Lon Data Found&#039;;

      }else{
        var center = new google.maps.LatLng(loc_data[0][1],loc_data[0][2]); 
        //alert(center)
        //var mapCanvas = document.getElementById(&#039;map-canvas&#039;);
        var mapOptions = {
          center : center,
          zoom   : 3,
          scrollwheel: false,
          //zoom: 2, for world view far out
          //zoom 13 for marsh
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(mapCanvas, mapOptions);
        var infowindow =  new google.maps.InfoWindow({
          content: &#039;&#039;
        });

        setMarkers(map, loc_data, pid_collector, infowindow);
      }  
}
//
//
//
function setMarkers(map, loc_data, pid_collector, infowindow) {
  for (var i = 0; i &lt; loc_data.length; i++) {
    // create a marker
	 // alert(locations[0])
    var data = loc_data[i];
	
    var myLatLng = new google.maps.LatLng(data[1],data[2]); 
    var marker = new google.maps.Marker({
      //title: data[0],
      position: myLatLng,
      map: map
    });
    
    // add an event listener for this marker
    lines = data[0].split(&#039;:::&#039;)
    
    if(lines.length &gt; 10){
      var html = &quot;&lt;div style=&#039;height:200px;width:300px;overflow:auto;&#039;&gt;&quot;;
    }else{
      var html = &quot;&lt;div style=&#039;width:300px;&#039;&gt;&quot;;
    }
    for(l in lines){
    	var pid = pid_collector[lines[l]];
    	html += &quot;&lt;a href=&#039;/projects/&quot;+pid+&quot;&#039;&gt;&quot; + lines[l] + &quot;&lt;/a&gt;&lt;br&gt;&quot;
    }
    html += &quot;&lt;/div&gt;&quot;;
    bindInfoWindow(marker, map, infowindow, &quot;&lt;p&gt;&quot;+html+&quot;&lt;/p&gt;&quot;); 

  }

}
//
//
//
function bindInfoWindow(marker, map, infowindow, html) { 
  google.maps.event.addListener(marker, &#039;mouseover&#039;, function() { 
    infowindow.setContent(html); 
    infowindow.open(map, marker); 
  }); 
}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
