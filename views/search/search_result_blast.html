<% include ../add_ins/begin-no_menu.ejs %>
<% if(show == 'blast_result'){ %>
		<% dt = JSON.parse(data); %>


		<div class='title'>BLAST Result</div>
		<div class='subtitle'></div>

		<%= dt.BlastOutput2.report.program %> (Program: <%= dt.BlastOutput2.report.version %>)
		<br>Query ID: <%= dt.BlastOutput2.report.results.search.query_id %>
		<br>Query Title: <%= dt.BlastOutput2.report.results.search.query_title %>
		<br>Query Length: <%= dt.BlastOutput2.report.results.search.query_len %>
		<table border='1' class='table'>
		<thead>
			<tr>
				<th>#</th><th>hit seqid</th><th>score</th><th>evalue</th><th>seqs</th>
			</tr>
		</thead>
		<tbody>
			<% for(i in dt.BlastOutput2.report.results.search.hits) { %>
			<% var hit = dt.BlastOutput2.report.results.search.hits[i] %>
			<tr>
		<td><%= hit.num %></td>
		<td><a href='/search/seqs/<%= hit.description[0].id %>'><%= hit.description[0].id %></a></td>
		<td><%= hit.hsps[0].score %></td>
		<td><%= hit.hsps[0].evalue %></td>
		<td><pre>
		query:   <%= hit.hsps[0].qseq %>
		hit:     <%= hit.hsps[0].hseq %>
		midline: <%= hit.hsps[0].midline %>
		</pre>

		</td>

		</tr>
		<% } %>
		</tbody>
		</table>
<% }else{ %>
	<% r = JSON.parse(obj); %>
    <div class='title'>Datasets that include this sequence ID: <%= seqid %></div>
    <table class='table sortable'>
    	<thead><tr><th data-defaultsort='disabled'>#</th><th>Project</th><th>Dataset</th><th data-defaultsort="desc">Seq Count</th></tr></thead>
    	<tbody>
    	<% k=1; %>
    	<% for(pj in r){ %>
    		<% for(ds in r[pj]){ %>
    			<tr><td><%= k %></td><td><%= pj %></td><td><%= ds %></td><td><%= r[pj][ds] %></td></tr>
    			<% k+=1; %>
    		<% } %>
    	<% } %>
    </tbody>
    </table>

<% }%>
<% include ../add_ins/end.ejs %>
<script type="text/javascript" src="/javascripts/bootstrap-sortable.js"></script>
 </body>
 </html>
