<% include ../add_ins/begin.ejs %>

<% if (user_submits) {
} else {
var user_submits = {}
} %>

<% if (regions) {
} else {
var regions = {}
} %>

<% if (pi_list) { %>
<% } else { %>
<% var pi_list = {} %>
<% } %>

<link href="/stylesheets/submissions.css" rel="stylesheet" \>
<% if (messages.success) { %>
<div class="alert_flash_message_success"><%= messages.success %></div>
<% }else if(messages.fail){ %>
<div class="alert_flash_message_fail"><%= messages.fail %></div>
<% } %>

<form id='submissions_edit_form' method='POST' action='/submissions/submission_request' class="form-horizontal">

    <div class="col-sm-12">
        <h3>Submission Request and Form Download</h3>
        <p>You must first fill out this form if you plan to have samples sequenced in the MBL's Keck facility
            (Illumina HiSeq or MiSeq).</p>
        <p>We need to know about your samples (e.g. how many, which rRNA domain is targeted, what the sample
            concentration is, submissions for each sample) and about your project (description, PI information, cost
            center
            to be charged).</p>
        <p>The information is used at various points in the sequencing process, from sample preparation through
            upload to VAMPS.</p>
        <p>Requests to change information should be addressed to <a href='mailto:morrison@mbl.edu'>Hilary
            Morrison</a>.</p>
        <p>Once the form is submitted the information can still be recalled and viewed by loading the submission
            code below.</p>
        <p class="center"><a href=''>Form Help</a> | <a href=''>Upload and Validate completed form</a> | <a href=''>Reset
            Form</a>
        </p>
    </div>

    <div class="submission_form_field">
        <div class="form-group">
            <label class="control-label col-sm-4" for="previous_submissions">Load Previous Submissions for
                viewing:</label>
            <div class="col-sm-3">

                <select id="previous_submissions" name="previous_submissions" class="form-control" width="20">
                    <option>Select</option>
                    <% for (var i in user_submits){ %>
                    <option value='<%= user_submits[i].submit_code %>'><%= user_submits[i].submit_code %></option>
                    <% } %>
                </select>
            </div>
        </div>

        <div class="form-group">

            <label class="control-label col-sm-4" for="select_pi">Select PI for submission to be submitted
                under:</label>
            <div class="col-sm-3">
                <select id="select_pi" name="select_pi" class="form-control">
                    <% pi_list.forEach(function(value){ %>
                    <option value="<%= value.pid %>"><%= value.PI %></option>
                    <% }); %>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="project_name">Project Name (This name may be adjusted by the
                MBL)</label>
            <div class="col-sm-8">

                <input type="text" id="project_name1" name="project_name1" maxlength="4" size="4" value="">_<input
                    type="text"
                    id="project_name2"
                    name="project_name2"
                    maxlength="4"
                    size="4"
                    value="">_<input
                    type="text" id="project_name3" name="project_name3" maxlength="4" size="5" value="" readonly>
            </div>
        </div>

        <div class="form-group">

            <label class="control-label col-sm-4" for="project_title">Project Title (max length: 60 chars)</label>
            <div class="col-sm-8">

                <input type="text" id="project_title" name="project_title" maxlength="60" size="60" value="">
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="project_description">Project Description (max length: 1000
                chars)</label>
            <div class="col-sm-8">

                <input type="text" id="project_description" name="project_description" maxlength="1000" size="60" value="">
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <label id="domain_regions-legend">Domain and Region:</label>
            </div>
            <!--Domain and Region:<br/>-->
            <% for (var i in domain_regions["domain_regions"]){ %>
            <!--<div class="row ">-->
            <div class="form-group">
                <label class="control-label col-sm-4 overrides"><%= domain_regions["domain_regions"][i]["domain"]
                    %></label>
                <div class="col-sm-8">
                    <% var regions = domain_regions["domain_regions"][i]["regions"] %>

                    <% for (var k in regions){ %>

                    <% if(typeof(regions[k].length) != 'undefined') %>
                    <% { %>
                    <% regions[k].length %>
                    <% } %>


                    <%= // JSON.stringify(domain_regions["domain_regions"][i]) %>
                    <input id="d_region" name="d_region" type='radio'
                           value='<%= regions[k] %>'> <%= regions[k] %> </input><br/>

                    <% }; %>

                </div>
            </div>
            <% }; %>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="funding_code">Funding Code (numeric only)</label>
            <div class="col-sm-8">
                <input type="number" id="funding_code" name="funding_code" maxlength="10" size="10" value="">
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="samples_number">How many individual samples will be
                submitted?</label>
            <div class="col-sm-8">
                <input type="number" id="samples_number" name="samples_number" size="3" value="">
            </div>
        </div>

        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button id="submissions_edit_form_btn" type="submit" class="btn btn-default">Validate</button>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript" src="/javascripts/submissions.js"></script>
<% include ../add_ins/end.ejs %>

</body>
</html>