<% include ../add_ins/begin.ejs %>

<br>
 <div class='title'>Add Project</div>
 <div class='subtitle'></div>

<% if (message) { %>
  <div class='alert_flash_message'><%= message %></div>
<% } %>

<br>

<% // TODO: change to real!!! (from routes)  
  console.log("PPP user.user_id");
  console.log(user.user_id);
%>
<% var env_hash = JSON.parse(env_sources) %>

<form name='add_project_form' method='POST' action='/user_data/add_project'>
  <!-- todo: back to from where was called -->
  <a href='/user_data/your_projects'>&lt;&lt;--back</a>
  <fieldset>
    <table class='table table-condensed'>
    <!--
    <tr>
      <th></th><th>Values</th>
    </tr>
    <tr>
    -->
      <td>
        <label for='name'>Project Name (max length 50 chars):</label>
      </td>
      <td>
        <input type='text' name='new_project_name' maxlength='50' size='50' value=''>
      </td>
    </tr>
    <tr>
      <td>
        <label for='env_source'>ENV Source:
        </label>
      </td>
      <td>
        <select id='env_source' name='new_env_source_id' class='selectpicker'  data-style='btn btn-xs btn-info'  data-size='100'>
          <% for(id in env_hash) { %>
              <option value='<%= id %>' ><%= env_hash[id] %></option>
          <% } %>
        </select>
      </td>
    </tr>

    <tr>
      <td><label for='public'>Public:</label>
      </td>
      <td>
        <input type='radio' checked='checked' name='new_privacy' value='True' > public
  &nbsp;<input type='radio'                   name='new_privacy' value='False'> private
      </td>
    </tr>
    <tr>
      <td>
        <label for='title'>Title (max length 100 chars):</label>
      </td>
      <td>
        <input type='text' name='new_project_title' maxlength='100' size='50' value=''>
      </td>
    </tr>
    <tr>
      <td>
        <label for='description'>Description (max length 255 chars):</label>
      </td>
      <td>
        <textarea name='new_project_description' maxlength='255' rows='1' cols='50'></textarea>
      </td>
    </tr>
    <tr>
      <td>
        <label for='description'>Funding:</label>
      </td>
      <td>
        <input type='text' name='new_funding' maxlength='50' size='50' value=''>        
      </td>
    </tr>
    </fieldset>
    
    <fieldset>
      <!-- 
      1) add select if first, last and email are giving ?
      2) validation for each
      -->
      <!-- center -->
      <tr><th colspan='2' class='hr_cell'>Owner (if different from the current user)</th></tr>
      <tr>
        <td><label for='first_name'>First Name:</label></td>
        <td><input type='text' name='first_name' maxlength='100' size='50' value='<%= project_info.first_name %>'></td>
      </tr>
      <tr>
        <td><label for='last_name'>Last Name:</label></td>
        <td><input type='text' name='last_name' maxlength='100' size='50' value='<%= project_info.last_name %>'></td>
      </tr>
      <tr>
        <td><label for='email'>Email:</label></td>
        <td><input type='text' name='email' maxlength='100' size='50' value='<%= project_info.email %>'></td>
      </tr>
      <tr>
        <td><label for='institution'>Institution:</label></td><td> <!-- select istitution --></td>
      </tr>
    </fieldset>
    
  </table>
  <br>

  
  <!-- center -->
  <button class='btn btn-sm btn-primary' type='submit'>Submit</button>

</form>


<% include ../add_ins/end.ejs %>
<script type='text/javascript' src='/javascripts/global.js'></script>
<script type='text/javascript' src='/javascripts/bootstrap-select.js'></script>
<script>
  $(document).ready(function(){
    $('.selectpicker').selectpicker({showSubtext:true, tickIcon: '',});
  });
</script>
 </body>
 </html>