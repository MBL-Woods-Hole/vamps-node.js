<% var items = JSON.parse(chosen_id_name_hash) %>
<% var distrows = JSON.parse(constants).DISTANCECHOICES.choices; %>
<% include ../add_ins/begin.ejs %>
<!-- <link rel="stylesheet" type="text/css" href="/stylesheets/mktree.css">-->
<!-- <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.css"> -->

  <div class='title'>Re-Order Datasets</div>
  
      
<div id='' class=''>
Here are your <%= items.names.length %> selected datasets:<br>

<div id='' class=''>
<form name='save_ds_order_form' id='' class='' method='POST' action='/visuals/<%= referer %>'>
    <table class='table'>
      <tr><td>Original order</td><td><span id='dragInfoArea' > ** Drag a row to change the dataset order. **</span></td></tr>
      <tr><td class='td_top'>
        
		  <table  id='' class='table table-condensed' >
            <% for (var i in items.names){ %>
               <tr><td>  <%= parseInt(i)+1 %> - <%= items.names[i] %> (id:<%= items.ids[i] %>)</td></tr>
            <% } %>
          </table>
		
      </td>
	  <td>
        <div id='reorder_div'>
	       
		   
		    <table id='drag_table' class='table table-condensed ' >
	          <% for (var i in items.names){ %>
	            <tr class='tooltip_row'>
	              <td class='dragHandle' id='<%= items.ids[i]+'--'+items.names[i] %>'> 
	              <!--  <input type='hidden' name='ds_order[]' value="<%= items.ids[i]+'--'+items.names[i] %>" > -->
					<input type='hidden' name='ds_order[]' value="<%= items.ids[i] %>" > 
	                <%= parseInt(i)+1 %> - <%= items.names[i] %> (id:<%= items.ids[i] %>)
	              </td>
	            </tr>
	          <% } %> 
	        </table>
			
			
        </div>

    </td>
    <td class=''>
        
        <table class='table'>
          <tr>
			<td class=''>
			  <div id='ds_save_order_div' class='small_font'>
				  <button type='submit' id='save_order_btn' class='btn btn-xs btn-primary'>Save Order and Return</button>
				  <input  type='hidden' id='' class='' name='resorted' value='1'>
				  <button type='button' id='reset_order_btn'class='btn btn-xs btn-primary'>Reset Order</button>
				  <button type='button' id='cancel_btn'  onclick='javscript:window.history.back();'   class='btn btn-xs btn-primary'>Cancel and Return</button>
				
			  </div>
			</td>
		  </tr>
          
          <tr>
			<td class=''>
				Drag rows to re-order
			</td>
		  </tr>
        
          <tr>
			<td class='small_font'>
				<button type='button' id='alphabetize' class='btn btn-xs btn-primary'>Alphabetize<button>
			</td>
		  </tr>
          <tr>
			<td class=''>
				Select distance metric<br>to cluster by:<br>

                        <select id='' name='selected_heatmap_distance' class='small_font' >
                        <% for(d in distrows ) { %>
                          <option value='<%= distrows[d].id %>'><%= distrows[d].show %></option>
                        <% } %>
                        </select>   
          			  	
	  		 </td>
		   </tr> 
                 
        </table>
        
    </td>
    </tr>
    </table>
  
</form>

</div>

</div>
<br>



<% include ../add_ins/end.ejs %>
 <script src="/javascripts/jquery.tablednd.js"></script>
 <script src="/javascripts/drag_rows.js"></script>
 <script type="text/javascript" src="/javascripts/global.js"></script>
 <script type="text/javascript" src="/javascripts/reorder_datasets.js"></script>
 

</body>
</html>

