<% var items = JSON.parse(chosen_id_name_hash) %>
<% var distrows = JSON.parse(constants).DISTANCECHOICES.choices; %>
<% include ../add_ins/begin.ejs %>
<!-- <link rel="stylesheet" type="text/css" href="/stylesheets/mktree.css">-->
<!-- <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.css"> -->

  <div class='title'>Community Visualization</div>
  <div class='subtitle'>Re-Order Datasets</div>
      
<div id='' class=''>
Here are your <%= items.names.length %> selected datasets:<br>

<div id='' class='small_font'>
<form name='save_ds_order_form' id='' class='' method='POST' action='/visuals/view_selection'>
    <table>
      <tr><td>Original Order</td><td>Drag to Re-Order</td></tr>
      <tr><td class='td_top'>
        <table border='1' id='' class='small_font center_table' >
        <% for (var i in items.names){ %>
            <tr><td>  <%= parseInt(i)+1 %> - <%= items.names[i] %> (id:<%= items.ids[i] %>)</td></tr>
        <% } %>
        </table>
    </td><td>
        <div id='reorder_div'>
        <table border='1' id='drag_table' class='small_font center_table' >
        <% for (var i in items.names){ %>
            <tr class='tooltip_row'>
              <td class='dragHandle' id='<%= items.ids[i]+'--'+items.names[i] %>'> 
                <input type='hidden' name='ds_order[]' value="<%= items.ids[i]+'--'+items.names[i] %>" > 
                <%= parseInt(i)+1 %> - <%= items.names[i] %> (id:<%= items.ids[i] %>)
              </td>
            </tr>
        <% } %> 
        </table>

        
        
       
        </div>

    </td>
    <td class='td_top'>
        
        <table border='1' class='single_border '>
          <tr><td class='small_font'><div id='ds_save_order_div' class='small_font'><input type='submit' id='save_order_btn' class='' value='Save Order and Return'></td></tr>
          
          <tr><td class='small_font'>Drag rows to re-order<br>OR</td></tr>
        
          <tr><td class='small_font'><input type='button' value='Alphabetize'><br>OR</td></tr>
          <tr><td class='small_font'>Select distance metric<br>to cluster by:<br>

                        <select name='selected_heatmap_distance' class='small_font'>
                        <% for(d in distrows ) { %>
                          <option value='<%= distrows[d].id %>'><%= distrows[d].show %></option>
                        <% } %>
                        </select>   
          <br>OR</td></tr> 
          <tr><td class='small_font'><input type='button' value='Reset Order'></td></tr>            
        </table>
        
    </td>
    </tr>
    </table>
  
</form>

</div>

</div>
<br>


  <div id='DEBUG_div'></div>
<script src="/javascripts/jquery-2.1.1.min.js"></script>
<script src="/javascripts/jquery.tablednd.js"></script>
<script src="/javascripts/drag_rows.js"></script>
<script type="text/javascript" src="/javascripts/global.js"></script>
  
<% include ../add_ins/end.ejs %>
