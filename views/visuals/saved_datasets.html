<% include ../add_ins/begin.ejs %>
<% var file_info = JSON.parse(finfo) %>
  <div class='title'>Saved Datasets</div>
  <div class='subtitle'></div>

<br><strong>Your saved datasets:</strong>
<ol>

<% for(f in file_info.files){ %>
	<% var filename = file_info.files[f] %>
	<% var fileSizeInBytes = file_info.size[filename] %>
	<% var fileSize = (fileSizeInBytes).toFixed(1) %>
	<% var sizer = 'Bytes' %>
	<% if(fileSizeInBytes > 1000) { %>
		<% fileSize = (fileSizeInBytes / 1000.0).toFixed(1) %>
		<% sizer = 'KB' %>
	<% } %>
	<% if(fileSizeInBytes > 1000000) { %>
		<% fileSize = (fileSizeInBytes / 1000000.0).toFixed(1) %>
		<% sizer = 'MB' %>
	<% } %>
	<% if(fileSizeInBytes > 1000000000) { %>
		<% fileSize = (fileSizeInBytes / 1000000000.0).toFixed(1) %>
		<% sizer = 'GB' %>
	<% } %>

	<% parts = filename.split('_') %>
	<% if(user == parts[0]) { %> 
			
				<li>
					<ul>
						<li>File: <%= filename %><% sizer %>
						<li><%= fileSize %> <%= sizer %> | created: <%= file_info.mtime[filename] %>
						 
						<li><a href='../file_utils?fxn=view&user=<%= user %>&type=datasets&filename=<%= filename %>' >view</a> |
							<a href='' name='view_array[]' value='<%= filename %>'>view2</a> |
							<a href='../file_utils?fxn=usethese&user=<%= user %>&type=datasets&filename=<%= filename %>' >use these</a> |
							<a href='../file_utils?fxn=delete&user=<%= user %>&type=datasets&filename=<%= filename %>' >delete</a>
						<div id='dataset_view_div'></div>
					</ul>
				</li>
			
	<% } %>
<% } %>
</ol>


<script type="text/javascript" src="/javascripts/global.js"></script>
<script type="text/javascript" src="/javascripts/saved_datasets.js"></script>
<% include ../add_ins/end.ejs %>
