<% include ../../add_ins/begin_nomenu.ejs %>
<% var mtx = JSON.parse(matrix); %>
<% var dataset1 = mtx.columns[0].id; %>
<% var dataset2 = mtx.columns[1].id; %>
<% var did1 = mtx.columns[0].did; %>
<% var did2 = mtx.columns[1].did; %>
<% var order = JSON.parse(order); %>
<% pi = JSON.parse(post_items); %>
<link rel="stylesheet" href="/stylesheets/bootstrap-sortable.css" >
<script>
  var pi_local  = JSON.parse('<%- post_items %>');
  //alert(pi_local.no_of_datasets)
  var mtx_local = JSON.parse('<%- matrix %>');
  //alert(mtx_local.data)
  var user_local  = '<%= user.username %>';
  var bar_type    = '<%= bar_type %>';

</script>
  
<div class='title'><%= title %></div>
<div class="progress" style="display:none;margin-top:10px;"></div>
<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100">0%</div>


<div class='subtitle'>
  Dataset-1: <%= dataset1 %>
  <br>
  Dataset-2: <%= dataset2 %>
</div>

<br>

<div id='my_div' class='well' style="height: 180px;">
  <div id='info_box' class='pull-right' style='padding:5px;background:lightgrey'>
    Distance Metric: <%= pi.selected_distance %>
    <br>
    Calculated Distance: <%= dist %>
  </div>

  <div class='pull-left' >Order of first dataset's values:<br>


    <a class='btn btn-xs btn-success' href='/visuals/bar_double?did1=<%= did1 %>&did2=<%= did2 %>&ts=<%= ts %>&dist=<%= dist %>&orderby=alpha&val=<%= order.alpha_value %>'>
      Taxa Names
        <% if(order.count_value == ''){ %>
            <% if(order.alpha_value == 'a'){ %>
              <span class="glyphicon glyphicon-chevron-down"></span>
            <% }else{ %>
              <span class="glyphicon glyphicon-chevron-up"></span>
            <% } %>
        <% } %>
    </a>
    
    <a class='btn btn-xs btn-success' href='/visuals/bar_double?did1=<%= did1 %>&did2=<%= did2 %>&ts=<%= ts %>&dist=<%= dist %>&orderby=count&val=<%= order.count_value %>'>
      Count
         <% if(order.alpha_value == ''){ %>
             <% if(order.count_value == 'min'){ %>
              <span class="glyphicon glyphicon-chevron-down"></span>
             <% }else{ %>
              <span class="glyphicon glyphicon-chevron-up"></span>
            <% } %>
        <% } %>
    </a>
    

  </div>
  <br><br>
  <center>
  	<div id='barcharts_div' class=''></div>
  </center>
</div>


<div id='barcharts_table_div' class=''></div>


